<mxfile host="app.diagrams.net" agent="draw.io" version="24.0.0">
  <diagram id="freestyle-aws" name="FreStyle AWS Architecture">
    <mxGraphModel dx="2037" dy="1356" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="1900" pageHeight="1400" background="light-dark(#ffffff, #ededed)" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- ===== Users ===== -->
        <mxCell id="user" parent="1" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#232F3E;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.users;" value="users" vertex="1">
          <mxGeometry x="30" y="330" width="78" height="78" as="geometry" />
        </mxCell>

        <!-- ===== CI/CD (top) ===== -->
        <mxCell id="gha" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1B1F23;fontColor=#ffffff;strokeColor=none;fontSize=11;fontStyle=1;" value="GitHub Actions&lt;br&gt;(CI/CD)" vertex="1">
          <mxGeometry x="60" y="20" width="140" height="45" as="geometry" />
        </mxCell>

        <!-- ===== Email (outside cloud) ===== -->
        <mxCell id="email" parent="1" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#232F3E;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.email;" value="Email&lt;br&gt;(Gmail通知)" vertex="1">
          <mxGeometry x="1580" y="820" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ===== AWS Cloud ===== -->
        <mxCell id="aws" parent="1" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_aws_cloud;strokeColor=#232F3E;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#232F3E;dashed=0;" value="AWS Cloud (ap-northeast-1)" vertex="1">
          <mxGeometry x="150" y="90" width="1400" height="880" as="geometry" />
        </mxCell>

        <!-- ===== Edge: WAF ===== -->
        <mxCell id="waf" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.wafv2;" value="WAF" vertex="1">
          <mxGeometry x="40" y="200" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ===== Edge: CloudFront ===== -->
        <mxCell id="cf" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cloudfront;" value="CloudFront" vertex="1">
          <mxGeometry x="170" y="200" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ===== S3 Frontend ===== -->
        <mxCell id="s3f" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.s3;" value="S3（React）" vertex="1">
          <mxGeometry x="170" y="370" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ===== VPC ===== -->
        <mxCell id="vpc" parent="aws" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_vpc2;strokeColor=#8C4FFF;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#AAB7B8;dashed=0;" value="VPC: 10.0.0.0/20" vertex="1">
          <mxGeometry x="290" y="30" width="580" height="560" as="geometry" />
        </mxCell>

        <!-- ===== Public Subnet ===== -->
        <mxCell id="pub_sub" parent="vpc" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#7AA116;fillColor=#F2F6E8;verticalAlign=top;align=left;spacingLeft=30;fontColor=#248814;dashed=0;" value="Public Subnets (1a / 1c)" vertex="1">
          <mxGeometry x="20" y="40" width="540" height="150" as="geometry" />
        </mxCell>

        <!-- ALB -->
        <mxCell id="alb" parent="pub_sub" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.application_load_balancer;" value="ALB" vertex="1">
          <mxGeometry x="230" y="35" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ===== Private Subnet ===== -->
        <mxCell id="priv_sub" parent="vpc" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#147EBA;fillColor=#E6F2F8;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" value="Private Subnets (1a / 1c)" vertex="1">
          <mxGeometry x="20" y="220" width="540" height="320" as="geometry" />
        </mxCell>

        <!-- ===== ECS Cluster ===== -->
        <mxCell id="ecs" parent="priv_sub" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_spot_fleet;strokeColor=#ED7100;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#ED7100;dashed=0;" value="ECS Fargate (2 vCPU / 4GB)" vertex="1">
          <mxGeometry x="20" y="40" width="330" height="200" as="geometry" />
        </mxCell>

        <!-- Spring Boot (Fargate) -->
        <mxCell id="app" parent="ecs" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.fargate;" value="Fargate（Spring Boot）" vertex="1">
          <mxGeometry x="30" y="55" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- Service icon -->
        <mxCell id="svc_icon" parent="ecs" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecs_service;" value="Service" vertex="1">
          <mxGeometry x="140" y="40" width="48" height="48" as="geometry" />
        </mxCell>

        <!-- Task icon -->
        <mxCell id="task_icon" parent="ecs" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecs_task;" value="Task" vertex="1">
          <mxGeometry x="140" y="110" width="48" height="48" as="geometry" />
        </mxCell>

        <!-- X-Ray Daemon -->
        <mxCell id="xrayd" parent="ecs" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.cloudwatch_2;" value="X-Ray Daemon&lt;br&gt;(sidecar)" vertex="1">
          <mxGeometry x="240" y="65" width="50" height="50" as="geometry" />
        </mxCell>

        <!-- ===== Database area ===== -->
        <mxCell id="db_area" parent="priv_sub" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#C925D1;dashed=1;verticalAlign=top;fontSize=12;fontStyle=1;fontColor=#C925D1;container=1;collapsible=0;" value="Database" vertex="1">
          <mxGeometry x="380" y="40" width="140" height="260" as="geometry" />
        </mxCell>

        <!-- RDS -->
        <mxCell id="rds" parent="db_area" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#C925D1;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.rds;" value="RDS&lt;br&gt;(MariaDB)" vertex="1">
          <mxGeometry x="40" y="35" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- DynamoDB -->
        <mxCell id="ddb" parent="db_area" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#C925D1;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.dynamodb;" value="DynamoDB" vertex="1">
          <mxGeometry x="40" y="145" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ===== Services outside VPC (right side) ===== -->

        <!-- Cognito -->
        <mxCell id="cognito" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cognito;" value="Cognito（JWT）" vertex="1">
          <mxGeometry x="960" y="80" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- Bedrock -->
        <mxCell id="bedrock" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#01A88D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.machine_learning;" value="Bedrock（AI Chat）" vertex="1">
          <mxGeometry x="960" y="220" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- S3 Images -->
        <mxCell id="s3i" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.s3;" value="S3（Note Images）" vertex="1">
          <mxGeometry x="960" y="370" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- SQS -->
        <mxCell id="sqs" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.sqs;" value="SQS" vertex="1">
          <mxGeometry x="1130" y="80" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- SQS DLQ -->
        <mxCell id="dlq" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.sqs;" value="SQS DLQ" vertex="1">
          <mxGeometry x="1280" y="80" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ECR -->
        <mxCell id="ecr" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecr;" value="ECR" vertex="1">
          <mxGeometry x="1130" y="370" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ECS top icon (deploy target) -->
        <mxCell id="ecs_top" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecs;" value="ECS on Fargate" vertex="1">
          <mxGeometry x="1280" y="370" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ===== Monitoring ===== -->

        <!-- CloudWatch -->
        <mxCell id="cw" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cloudwatch_2;" value="CloudWatch&lt;br&gt;Alarms" vertex="1">
          <mxGeometry x="960" y="560" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- X-Ray -->
        <mxCell id="xray" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cloudwatch_2;" value="X-Ray" vertex="1">
          <mxGeometry x="1130" y="560" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- SNS -->
        <mxCell id="sns" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.sns;" value="SNS" vertex="1">
          <mxGeometry x="1280" y="560" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ===== WebSocket path ===== -->
        <mxCell id="apigw" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.api_gateway;" value="API Gateway&lt;br&gt;(WebSocket)" vertex="1">
          <mxGeometry x="40" y="560" width="60" height="60" as="geometry" />
        </mxCell>

        <mxCell id="lambda" parent="aws" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.lambda;" value="Lambda" vertex="1">
          <mxGeometry x="170" y="560" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ===== EDGES ===== -->

        <!-- Users → WAF -->
        <mxCell id="e1" edge="1" parent="1" source="user" target="waf" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#232F3E;strokeWidth=2;" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- WAF → CloudFront -->
        <mxCell id="e2" edge="1" parent="1" source="waf" target="cf" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#232F3E;strokeWidth=2;" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- CloudFront → S3 Frontend -->
        <mxCell id="e3" edge="1" parent="1" source="cf" target="s3f" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#3F8624;strokeWidth=1;dashed=1;fontSize=10;" value="静的コンテンツ">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- CloudFront → ALB -->
        <mxCell id="e4" edge="1" parent="1" source="cf" target="alb" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#8C4FFF;strokeWidth=2;fontSize=10;" value="API">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ALB → Spring Boot -->
        <mxCell id="e5" edge="1" parent="1" source="alb" target="app" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#ED7100;strokeWidth=2;fontSize=10;" value=":8080">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Spring Boot → RDS -->
        <mxCell id="e6" edge="1" parent="1" source="app" target="rds" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#C925D1;strokeWidth=1;fontSize=10;" value="JDBC">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Spring Boot → Cognito -->
        <mxCell id="e7" edge="1" parent="1" source="app" target="cognito" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#DD344C;strokeWidth=1;fontSize=10;" value="JWT検証">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Spring Boot → DynamoDB -->
        <mxCell id="e8" edge="1" parent="1" source="app" target="ddb" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#C925D1;strokeWidth=1;" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Spring Boot → S3 Images -->
        <mxCell id="e9" edge="1" parent="1" source="app" target="s3i" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#3F8624;strokeWidth=1;fontSize=10;" value="Presigned URL">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Spring Boot → Bedrock -->
        <mxCell id="e10" edge="1" parent="1" source="app" target="bedrock" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#01A88D;strokeWidth=1;fontSize=10;" value="AI推論">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Spring Boot → SQS -->
        <mxCell id="e11" edge="1" parent="1" source="app" target="sqs" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#E7157B;strokeWidth=1;fontSize=10;" value="enqueue">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- SQS → DLQ -->
        <mxCell id="e12" edge="1" parent="1" source="sqs" target="dlq" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#E7157B;strokeWidth=1;dashed=1;fontSize=10;" value="失敗">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- X-Ray Daemon → X-Ray -->
        <mxCell id="e13" edge="1" parent="1" source="xrayd" target="xray" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#E7157B;strokeWidth=1;dashed=1;fontSize=10;" value="traces">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Spring Boot → CloudWatch -->
        <mxCell id="e14" edge="1" parent="1" source="app" target="cw" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#E7157B;strokeWidth=1;dashed=1;fontSize=10;" value="metrics">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- CloudWatch → SNS -->
        <mxCell id="e15" edge="1" parent="1" source="cw" target="sns" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#E7157B;strokeWidth=1;fontSize=10;" value="alarm">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- SNS → Email -->
        <mxCell id="e16" edge="1" parent="1" source="sns" target="email" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#E7157B;strokeWidth=1;fontSize=10;" value="通知">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- GitHub Actions → ECR -->
        <mxCell id="e17" edge="1" parent="1" source="gha" target="ecr" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#ED7100;strokeWidth=1;fontSize=10;" value="docker push">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ECR → ECS top -->
        <mxCell id="e18" edge="1" parent="1" source="ecr" target="ecs_top" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#ED7100;strokeWidth=2;" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ECS top → Spring Boot (deploy) -->
        <mxCell id="e19" edge="1" parent="1" source="ecs_top" target="app" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#ED7100;strokeWidth=1;dashed=1;fontSize=10;" value="deploy">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- API Gateway → Lambda -->
        <mxCell id="e20" edge="1" parent="1" source="apigw" target="lambda" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#8C4FFF;strokeWidth=1;fontSize=10;" value="WebSocket">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Lambda → DynamoDB -->
        <mxCell id="e21" edge="1" parent="1" source="lambda" target="ddb" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#C925D1;strokeWidth=1;" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Cognito → ALB (auth flow) -->
        <mxCell id="e22" edge="1" parent="1" source="cognito" target="alb" style="edgeStyle=orthogonalEdgeStyle;html=1;strokeColor=#DD344C;strokeWidth=1;dashed=1;fontSize=10;" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
